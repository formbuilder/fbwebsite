<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>FormBuilder - Perl CGI Form Builder CPAN module</title>
<link type="text/css" rel="stylesheet" href="/layout/style.css" />
<script src="/js/miniwin.js" type="text/javascript"></script>
</head>
<body>
<!-- top navbar -->
<table width="100%" border="0" cellspacing="0" class="bar"><tr>
<td width="228"><a href="/"><img src="/images/fb_logo5.gif" width="228" height="42" 
 border="0" alt="Perl Form Builder" /></a></td>
<td class="bar">
   ::<a href="/features/" class="bar">Features</a>
   ::<a href="/download/" class="bar">Download</a>
   ::<a href="/tutor/" class="bar">Tutorial</a>
   ::<a href="/ex/" class="bar">Examples</a>
   <br />
   ::<a href="/docs/" class="bar">Documentation</a>
   ::<a href="http://groups.google.com/group/perl-formbuilder" class="bar">FormBuilder Google Group</a>
   ::<a href="http://blog.gmane.org/gmane.comp.lang.perl.modules.formbuilder" class="bar">Old List Archives</a>
   ::<a href="/contrib/" class="bar">Contribute</a>
</td>
<td class="bar" align="center" valign="middle">
<!-- BEGIN PAYPAL CODE -->
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value="nate@wiger.org" />
<input type="hidden" name="item_name" value="FormBuilder development support" />
<input type="image" src="http://www.paypal.com/images/x-click-but04.gif" 
name="submit" alt="Donate using PayPal" />
</form>
</td>
</tr>
</table>
<!-- spacer -->
<div id="navspacer"><img src="/images/clear.gif" width="1" height="1"></div>
<div style="background:#c00;color:#fff;font-weight:bold;padding-left:4px">
Note: The mailing list is has been replaced by the <a href="http://groups.google.com/group/perl-formbuilder" style="color:#ddd">Google FormBuilder Group</a>
</div>
<div id="navspacer"><img src="/images/clear.gif" width="1" height="1"></div>
<table class="body" border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top" class="body">
<!-- opens the left navbar -->
<table border="0" cellpadding="5" cellspacing="0" class="leftnav">
<tr>
<td valign="top" class="leftnav">
<font size=2>
<form action="/redirect.pl" method="GET">
<select name="url" onChange="this.form.submit()">
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder.html">CGI::FormBuilder</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder.html">CGI::FormBuilder</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Field.html">CGI::FormBuilder::Field</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Messages.html">CGI::FormBuilder::Messages</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Multi.html">CGI::FormBuilder::Multi</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Source.html">CGI::FormBuilder::Source</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Source/File.html">CGI::FormBuilder::Source::File</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template.html">CGI::FormBuilder::Template</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/Builtin.html">CGI::FormBuilder::Template::Builtin</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/CGI_SSI.html">CGI::FormBuilder::Template::CGI_SSI</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/Div.html">CGI::FormBuilder::Template::Div</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/Fast.html">CGI::FormBuilder::Template::Fast</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/HTML.html">CGI::FormBuilder::Template::HTML</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/TT2.html" selected>CGI::FormBuilder::Template::TT2</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template/Text.html">CGI::FormBuilder::Template::Text</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Test.html">CGI::FormBuilder::Test</option>
<option value="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Util.html">CGI::FormBuilder::Util</option>
<option value=/docs/>Version other than 3.06</option>
</select></form></font>
<style>ul { margin-left: 0; padding-left: 10px; }</style>
<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CGI::FormBuilder::Template::TT2 - FormBuilder interface to Template Toolkit</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:_atsserver@pizzly.apple.com" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#engine">engine</a></li>
		<li><a href="#prepare">prepare</a></li>
		<li><a href="#render">render</a></li>
	</ul>

	<li><a href="#templates">TEMPLATES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#revision">REVISION</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>CGI::FormBuilder::Template::TT2 - FormBuilder interface to Template Toolkit</p>
<p>
</p>
<!-- closes the left navbar -->
</td></tr></table></td><td valign="top" class="body">

<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
                    fields   =&gt; \@fields,
                    template =&gt; {
                        type =&gt; 'TT2',
                        template =&gt; 'form.tmpl',
                        variable =&gt; 'form',
                    }
               );</pre>
<p>
</p>

<h1><a name="description">DESCRIPTION</a></h1>
<p>This engine adapts <strong>FormBuilder</strong> to use <code>Template Toolkit</code>.  To do so, 
specify the <code>template</code> option as a hashref which includes the <code>type</code>
option set to <code>TT2</code> and the <code>template</code> option set to the name of the
template you want processed. You can also add <code>variable</code> as an option
(among others) to denote the variable name that you want the form data
to be referenced by:</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
                    fields =&gt; \@fields,
                    template =&gt; {
                        type =&gt; 'TT2',
                        template =&gt; 'userinfo.tmpl',
                        variable =&gt; 'form',
                    }
               );</pre>
<p>The following methods are provided (usually only used internally):</p>
<p>
</p>
<h2><a name="engine">engine</a></h2>
<p>Returns a reference to the <code>Template</code> object</p>
<p>
</p>
<h2><a name="prepare">prepare</a></h2>
<p>Returns a hash of all the fields ready to be rendered.</p>
<p>
</p>
<h2><a name="render">render</a></h2>
<p>Uses the prepared hash and expands the template, returning a string of HTML.</p>
<p>
</p>

<h1><a name="templates">TEMPLATES</a></h1>
<p>The template might look something like this:</p>
<pre>
    &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;[% form.title %]&lt;/title&gt;
      [% form.jshead %]
    &lt;/head&gt;
    &lt;body&gt;
      [% form.start %]
      &lt;table&gt;
        [% FOREACH field = form.fields %]
        &lt;tr valign=&quot;top&quot;&gt;
          &lt;td&gt;
            [% field.required
                  ? &quot;&lt;b&gt;$field.label&lt;/b&gt;&quot;
                  : field.label
            %]
          &lt;/td&gt;
          &lt;td&gt;
            [% IF field.invalid %]
            Missing or invalid entry, please try again.
        &lt;br/&gt;
        [% END %]

        [% field.field %]
      &lt;/td&gt;
    &lt;/tr&gt;
        [% END %]
        &lt;tr&gt;
          &lt;td colspan=&quot;2&quot; align=&quot;center&quot;&gt;
            [% form.submit %] [% form.reset %]
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      [% form.end %]
    &lt;/body&gt;
    &lt;/html&gt;</pre>
<p>By default, the Template Toolkit makes all the form and field
information accessible through simple variables.</p>
<pre>
    [% jshead %]  -  JavaScript to stick in &lt;head&gt;
    [% title  %]  -  The &lt;title&gt; of the HTML form
    [% start  %]  -  Opening &lt;form&gt; tag and internal fields
    [% submit %]  -  The submit button(s)
    [% reset  %]  -  The reset button
    [% end    %]  -  Closing &lt;/form&gt; tag
    [% fields %]  -  List of fields
    [% field  %]  -  Hash of fields (for lookup by name)</pre>
<p>You can specify the <code>variable</code> option to have all these variables
accessible under a certain namespace.  For example:</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
        fields =&gt; \@fields,
        template =&gt; {
             type =&gt; 'TT2',
             template =&gt; 'form.tmpl',
             variable =&gt; 'form'
        },
    );</pre>
<p>With <code>variable</code> set to <code>form</code> the variables are accessible as:</p>
<pre>
    [% form.jshead %]
    [% form.start  %]
    etc.</pre>
<p>You can access individual fields via the <code>field</code> variable.</p>
<pre>
    For a field named...  The field data is in...
    --------------------  -----------------------
    job                   [% form.field.job   %]
    size                  [% form.field.size  %]
    email                 [% form.field.email %]</pre>
<p>Each field contains various elements.  For example:</p>
<pre>
    [% myfield = form.field.email %]

    [% myfield.label    %]  # text label
    [% myfield.field    %]  # field input tag
    [% myfield.value    %]  # first value
    [% myfield.values   %]  # list of all values
    [% myfield.option   %]  # first value
    [% myfield.options  %]  # list of all values
    [% myfield.required %]  # required flag
    [% myfield.invalid  %]  # invalid flag</pre>
<p>The <code>fields</code> variable contains a list of all the fields in the form.
To iterate through all the fields in order, you could do something like
this:</p>
<pre>
    [% FOREACH field = form.fields %]
    &lt;tr&gt;
     &lt;td&gt;[% field.label %]&lt;/td&gt; &lt;td&gt;[% field.field %]&lt;/td&gt;
    &lt;/tr&gt;
    [% END %]</pre>
<p>If you want to customise any of the Template Toolkit options, you can
set the <code>engine</code> option to contain a reference to an existing
<code>Template</code> object or hash reference of options which are passed to
the <code>Template</code> constructor.  You can also set the <code>data</code> item to
define any additional variables you want accesible when the template
is processed.</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
        fields =&gt; \@fields,
        template =&gt; {
             type =&gt; 'TT2',
             template =&gt; 'form.tmpl',
             variable =&gt; 'form',
             engine   =&gt; {
                  INCLUDE_PATH =&gt; '/usr/local/tt2/templates',
             },
             data =&gt; {
                  version =&gt; 1.23,
                  author  =&gt; 'Fred Smith',
             },
        },
    );</pre>
<p>For further details on using the Template Toolkit, see <code>Template</code> or
<a href="http://www.template-toolkit.org">http://www.template-toolkit.org</a></p>
<p>
</p>

<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder.html">the CGI::FormBuilder manpage</a>, <a href="/download/CGI-FormBuilder-3.06/docs/CGI/FormBuilder/Template.html">the CGI::FormBuilder::Template manpage</a>, <em>Template</em></p>
<p>
</p>

<h1><a name="revision">REVISION</a></h1>
<p>$Id: TT2.pm 100 2007-03-02 18:13:13Z nwiger $</p>
<p>
</p>

<h1><a name="author">AUTHOR</a></h1>
<p>Copyright (c) <em>Nate Wiger</em>. All Rights Reserved.</p>
<p>Template Tookit support is largely due to a huge patch from Andy Wardley.</p>
<p>This module is free software; you may copy this under the terms of
the GNU General Public License, or the Artistic License, copies of
which should have accompanied your Perl kit.</p>




</td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="2" class="bar">
<tr><td align="center" class="bar">
FormBuilder is &copy; 2000-2006 <a href="/contrib/author.pl" class="bar">Nate Wiger</a>,
with contributions from <a href="/contrib/" class="bar">many people</a>.
</td></tr></table>
<div align="center">
<a href="http://www.nateware.com/"><img src="/images/nateware_powered.gif"
 border="0" width="92" height="33" alt="Nateware" /></a>
</div>
</body></html>
