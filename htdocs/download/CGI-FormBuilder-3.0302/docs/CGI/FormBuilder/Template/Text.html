<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>FormBuilder - Perl CGI Form Builder CPAN module</title>
<link type="text/css" rel="stylesheet" href="/layout/style.css" />
<script src="/js/miniwin.js" type="text/javascript"></script>
</head>
<body>
<!-- top navbar -->
<table width="100%" border="0" cellspacing="0" class="bar"><tr>
<td width="228"><a href="/"><img src="/images/fb_logo5.gif" width="228" height="42" 
 border="0" alt="Perl Form Builder" /></a></td>
<td class="bar">
   ::<a href="/features/" class="bar">Features</a>
   ::<a href="/download/" class="bar">Download</a>
   ::<a href="/tutor/" class="bar">Tutorial</a>
   ::<a href="/ex/" class="bar">Examples</a>
   <br />
   ::<a href="/docs/" class="bar">Documentation</a>
   ::<a href="/mailman/listinfo/fbusers" class="bar">Join the Mailing List</a>
   ::<a href="http://blog.gmane.org/gmane.comp.lang.perl.modules.formbuilder" class="bar">List Archives</a>
   ::<a href="/contrib/" class="bar">Contribute</a>
</td>
<td class="bar" align="center" valign="middle">
<!-- BEGIN PAYPAL CODE -->
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value="nate@wiger.org" />
<input type="hidden" name="item_name" value="FormBuilder development support" />
<input type="image" src="http://www.paypal.com/images/x-click-but04.gif" 
name="submit" alt="Donate using PayPal" />
</form>
</td>
</tr>
</table>
<!-- spacer -->
<div id="navspacer"><img src="/images/clear.gif" width="1" height="1"></div>
<table class="body" border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top" class="body">
<!-- opens the left navbar -->
<table border="0" cellpadding="5" cellspacing="0" class="leftnav">
<tr>
<td valign="top" class="leftnav">
<font size=2>
<form action="/redirect.pl" method="GET">
<select name="url" onChange="this.form.submit()">
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Field.html">CGI::FormBuilder::Field</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Messages.html">CGI::FormBuilder::Messages</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Multi.html">CGI::FormBuilder::Multi</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder.html">CGI::FormBuilder</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Source/File.html">CGI::FormBuilder::Source::File</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Source.html">CGI::FormBuilder::Source</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Template/Fast.html">CGI::FormBuilder::Template::Fast</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Template/HTML.html">CGI::FormBuilder::Template::HTML</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Template.html">CGI::FormBuilder::Template</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Template/Text.html" selected>CGI::FormBuilder::Template::Text</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Template/TT2.html">CGI::FormBuilder::Template::TT2</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Test.html">CGI::FormBuilder::Test</option>
<option value="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Util.html">CGI::FormBuilder::Util</option>
<option value=/docs/>Version other than 3.0302</option>
</select></form></font>
<style>ul { margin-left: 0; padding-left: 10px; }</style>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CGI::FormBuilder::Template::Text - FormBuilder interface to Text::Template</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#revision">REVISION</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
<!-- INDEX END -->

<!-- closes the left navbar -->
</td></tr></table></td><td valign="top" class="body">

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>CGI::FormBuilder::Template::Text - FormBuilder interface to Text::Template</p>
<p>
</p>

<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
                    fields   =&gt; \@fields,
                    template =&gt; {
                        type =&gt; 'Text',
                        template =&gt; 'form.tmpl',
                        variable =&gt; 'form',
                    }
               );</pre>
<p>
</p>

<h1><a name="description">DESCRIPTION</a></h1>
<p>This engine adapts <strong>FormBuilder</strong> to use <code>Text::Template</code>. Usage is very
similar to Template Toolkit:</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
                    fields =&gt; \@fields,
                    template =&gt; {
                        type =&gt; 'Text',           # use Text::Template
                        template =&gt; 'form.tmpl',
                    }
               );</pre>
<p>The default options passed into <code>Text::Template-&gt;new()</code> with this
calling form are:</p>
<pre>
    TYPE   =&gt; 'FILE'
    SOURCE =&gt; 'form.tmpl'
    DELIMITERS =&gt; ['&lt;%','%&gt;']</pre>
<p>As these params are passed for you, your template will look very similar to
ones used by Template Toolkit and <code>HTML::Mason</code> (the Text::Template default
delimiters are <code>{</code> and <code>}</code>, but using alternative delimiters speeds it up by
about 25%, and the <code>&lt;%</code> and <code>%&gt;</code> delimiters are good,
familiar-looking alternatives).</p>
<pre>
    &lt;% $jshead %&gt;  -  JavaScript to stick in &lt;head&gt;
    &lt;% $title  %&gt;  -  The &lt;title&gt; of the HTML form
    &lt;% $start  %&gt;  -  Opening &lt;form&gt; tag and internal fields
    &lt;% $submit %&gt;  -  The submit button(s)
    &lt;% $reset  %&gt;  -  The reset button
    &lt;% $end    %&gt;  -  Closing &lt;/form&gt; tag
    &lt;% $fields %&gt;  -  List of fields
    &lt;% $field  %&gt;  -  Hash of fields (for lookup by name)</pre>
<p>Note that you refer to variables with a preceding <code>$</code>, just like in Perl.
Like Template Toolkit, you can specify a variable to place fields under:</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
        fields =&gt; \@fields,
        template =&gt; {
             type =&gt; 'Text',
             template =&gt; 'form.tmpl',
             variable =&gt; 'form'
        },
    );</pre>
<p>Unlike Template Toolkit, though, these will not be placed in OO-style,
dot-separated vars. Instead, a hash will be created which you then reference:</p>
<pre>
    &lt;% $form{jshead} %&gt;
    &lt;% $form{start}  %&gt;
    etc.</pre>
<p>And field data is in a hash-of-hashrefs format:</p>
<pre>
    For a field named...  The field data is in...
    --------------------  -----------------------
    job                   &lt;% $form{field}{job}   %]
    size                  &lt;% $form{field}{size}  %]
    email                 &lt;% $form{field}{email} %]</pre>
<p>Since <code>Text::Template</code> looks so much like Perl, you can access individual
elements and create variables like so:</p>
<pre>
    &lt;%
        my $myfield = $form{field}{email};
        $myfield-&gt;{label};      # text label
        $myfield-&gt;{field};      # field input tag
        $myfield-&gt;{value};      # first value
        $myfield-&gt;{values};     # list of all values
        $myfield-&gt;{options};    # list of all options
        $myfield-&gt;{required};   # required flag
        $myfield-&gt;{invalid};    # invalid flag
        $myfield-&gt;{error};      # error string if invalid
    %&gt;

    &lt;%
        for my $field (@{$form{fields}}) {
            $OUT .= &quot;&lt;tr&gt;\n&lt;td&gt;&quot; . $field-&gt;{label} . &quot;&lt;/td&gt; &lt;td&gt;&quot; 
                                 . $field-&gt;{field} . &quot;&lt;/td&gt;\n&lt;tr&gt;&quot;;
        }
    %&gt;</pre>
<p>In addition, when using the engine option, you supply an existing
Text::Template object or a hash of parameters to be passed to <code>new()</code>.
For example, you can ask for different delimiters yourself:</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
        fields =&gt; \@fields,
        template =&gt; {
             type =&gt; 'Text',
             template =&gt; 'form.tmpl',
             variable =&gt; 'form',
             engine   =&gt; {
                DELIMITERS =&gt; [ '[@--', '--@]' ],
             },
             data =&gt; {
                  version =&gt; 1.23,
                  author  =&gt; 'Fred Smith',
             },
        },
    );</pre>
<p>If you pass a hash of parameters, you can override the <code>TYPE</code> and <code>SOURCE</code> parameters,
as well as any other <code>Text::Template</code> options. For example, you can pass in a string
template with <code>TYPE =&gt; STRING</code> instead of loading it from a file. You must
specify <strong>both</strong> <code>TYPE</code> and <code>SOURCE</code> if doing so.  The good news is this is trivial:</p>
<pre>
    my $form = CGI::FormBuilder-&gt;new(
        fields =&gt; \@fields,
        template =&gt; {
             type =&gt; 'Text',
             variable =&gt; 'form',
             engine   =&gt; {
                  TYPE =&gt; 'STRING',
                  SOURCE =&gt; $string,
                  DELIMITERS =&gt; [ '[@--', '--@]' ],
             },
             data =&gt; {
                  version =&gt; 1.23,
                  author  =&gt; 'Fred Smith',
             },
        },
    );</pre>
<p>If you get the crazy idea to let users of your application pick the template file
(strongly discouraged) and you're getting errors, look at the <code>Text::Template</code>
documentation for the <code>UNTAINT</code> feature.</p>
<p>Also, note that <code>Text::Template</code>'s <code>PREPEND =&gt; 'use strict;'</code> option is not
recommended due to the dynamic nature for <code>FormBuilder</code>.  If you use it, then you'll
have to declare each variable that <code>FormBuilder</code> puts into your template with
<code>use vars qw($jshead' ... etc);</code></p>
<p>If you're really stuck on this, though, a workaround is to say:</p>
<pre>
    PREPEND =&gt; 'use strict; use vars qw(%form);'</pre>
<p>and then set the option <code>variable =&gt; 'form'</code>. That way you can have strict Perl
without too much hassle, except that your code might be exhausting to look at :-).
Things like <code>$form{field}{your_field_name}{field}</code> end up being all over the place,
instead of the nicer short forms.</p>
<p>Finally, when you use the <code>data</code> template option, the keys you specify will be available
to the template as regular variables. In the above example, these would be
<code>&lt;% $version %&gt;</code> and <code>&lt;% $author %&gt;</code>. And complex datatypes are easy:</p>
<pre>
    data =&gt; {
            anArray =&gt; [ 1, 2, 3 ],
            aHash =&gt; { orange =&gt; 'tangy', chocolate =&gt; 'sweet' },
    }</pre>
<p>This becomes the following in your template:</p>
<pre>
    &lt;%
        @anArray;    # you can use $myArray[1] etc.
        %aHash;      # you can use $myHash{chocolate} etc.
    %&gt;</pre>
<p>For more information, please consult the <code>Text::Template</code> documentation.</p>
<p>
</p>

<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder.html">the CGI::FormBuilder manpage</a>, <a href="/download/CGI-FormBuilder-3.0302/docs/CGI/FormBuilder/Template.html">the CGI::FormBuilder::Template manpage</a>, <a href="/download/CGI-FormBuilder-3.0302/docs/Text/Template.html">the Text::Template manpage</a></p>
<p>
</p>

<h1><a name="revision">REVISION</a></h1>
<p>$Id: Text.pm,v 1.32 2006/02/24 01:42:29 nwiger Exp $</p>
<p>
</p>

<h1><a name="author">AUTHOR</a></h1>
<p>Copyright (c) 2000-2006 Nate Wiger &lt;<a href="mailto:nate@wiger.org">nate@wiger.org</a>&gt;. All Rights Reserved.</p>
<p>Text::Template support is due to huge contributions by Jonathan Buhacoff.
Thanks man.</p>
<p>This module is free software; you may copy this under the terms of
the GNU General Public License, or the Artistic License, copies of
which should have accompanied your Perl kit.</p>




</td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="2" class="bar">
<tr><td align="center" class="bar">
FormBuilder is &copy; 2000-2006 <a href="/contrib/author.pl" class="bar">Nate Wiger</a>,
with contributions from <a href="/contrib/" class="bar">many people</a>.
</td></tr></table>
<div align="center">
<a href="http://www.nateware.com/"><img src="/images/nateware_powered.gif"
 border="0" width="92" height="33" alt="Nateware" /></a>
</div>
</body></html>
