<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>FormBuilder - Perl CGI Form Builder CPAN module</title>
<link type="text/css" rel="stylesheet" href="/layout/style.css" />
<script src="/js/miniwin.js" type="text/javascript"></script>
</head>
<body>
<!-- top navbar -->
<table width="100%" border="0" cellspacing="0" class="bar"><tr>
<td width="228"><a href="/"><img src="/images/fb_logo5.gif" width="228" height="42" 
 border="0" alt="Perl Form Builder" /></a></td>
<td class="bar">
   ::<a href="/features/" class="bar">Features</a>
   ::<a href="/download/" class="bar">Download</a>
   ::<a href="/tutor/" class="bar">Tutorial</a>
   ::<a href="/ex/" class="bar">Examples</a>
   <br />
   ::<a href="/docs/" class="bar">Documentation</a>
   ::<a href="/mailman/listinfo/fbusers" class="bar">Join the Mailing List</a>
   ::<a href="http://blog.gmane.org/gmane.comp.lang.perl.modules.formbuilder" class="bar">List Archives</a>
   ::<a href="/contrib/" class="bar">Contribute</a>
</td>
<td class="bar" align="center" valign="middle">
<!-- BEGIN PAYPAL CODE -->
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value="nate@wiger.org" />
<input type="hidden" name="item_name" value="FormBuilder development support" />
<input type="image" src="http://www.paypal.com/images/x-click-but04.gif" 
name="submit" alt="Donate using PayPal" />
</form>
</td>
</tr>
</table>
<!-- spacer -->
<div id="navspacer"><img src="/images/clear.gif" width="1" height="1"></div>
<table class="body" border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top" class="body">
<!-- opens the left navbar -->
<table border="0" cellpadding="5" cellspacing="0" class="leftnav">
<tr>
<td valign="top" class="leftnav">
<font size=2>
<form action="/redirect.pl" method="GET">
<select name="url" onChange="this.form.submit()">
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Field.html">CGI::FormBuilder::Field</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Messages.html">CGI::FormBuilder::Messages</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Multi.html">CGI::FormBuilder::Multi</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder.html">CGI::FormBuilder</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Source/File.html" selected>CGI::FormBuilder::Source::File</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Source.html">CGI::FormBuilder::Source</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Template/Fast.html">CGI::FormBuilder::Template::Fast</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Template/HTML.html">CGI::FormBuilder::Template::HTML</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Template.html">CGI::FormBuilder::Template</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Template/Text.html">CGI::FormBuilder::Template::Text</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Template/TT2.html">CGI::FormBuilder::Template::TT2</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Test.html">CGI::FormBuilder::Test</option>
<option value="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder/Util.html">CGI::FormBuilder::Util</option>
<option value=/docs/>Version other than 3.0301</option>
</select></form></font>
<style>ul { margin-left: 0; padding-left: 10px; }</style>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CGI::FormBuilder::Source::File - Initialize FormBuilder from external file</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<ul>

		<li><a href="#new__"><code>new()</code></a></li>
		<li><a href="#parse__source_"><code>parse($source)</code></a></li>
		<li><a href="#write_module__modname_"><code>write_module($modname)</code></a></li>
	</ul>

	<li><a href="#notes">NOTES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#revision">REVISION</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
<!-- INDEX END -->

<!-- closes the left navbar -->
</td></tr></table></td><td valign="top" class="body">

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>CGI::FormBuilder::Source::File - Initialize FormBuilder from external file</p>
<p>
</p>

<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
    # use the main module
    use CGI::FormBuilder;

    my $form = CGI::FormBuilder-&gt;new(source =&gt; 'form.conf');

    my $lname = $form-&gt;field('lname');  # like normal</pre>
<p>
</p>

<h1><a name="description">DESCRIPTION</a></h1>
<p>This parses a file that contains <strong>FormBuilder</strong> configuration options,
and returns a hash suitable for creating a new <code>$form</code> object.
Usually, you should not use this directly, but instead pass a <code>$filename</code>
into <code>CGI::FormBuilder</code>, which calls this module.</p>
<p>The configuration format steals from Python (ack!) which is sensitive to
indentation and newlines. This saves you work in the long run. Here's
a complete form:</p>
<pre>
    # form basics
    method: POST
    header: 1
    title:  Account Information

    # define fields
    fields:
        fname:
            label:   First Name
            size:    40

        minit:
            label:   Middle Initial
            size:    1

        lname:
            label:   Last Name
            size:    60

        email:
            size:    80

        phone:
            label:    Home Phone
            comment:  (optional)
            required: 0

        sex:
            label:   Gender
            options: M=Male, F=Female
            jsclick: javascript:alert('Change your mind??')

        # custom options and sorting sub
        state:
            options:  \&amp;getstates
            sortopts: \&amp;sortstates

        datafile:
            label:   Upload Survey Data
            type:    file
            growable:   1

    # validate our above fields
    validate:
        email:  EMAIL
        phone:  /^1?-?\d{3}-?\d{3}-?\d{4}$/

    required: ALL

    # create two submit buttons, and skip validation on &quot;Cancel&quot;
    submit:  Update, Cancel
    jsfunc:  &lt;&lt;EOJS
  // skip validation
  if (this._submit.value == 'Cancel') return true;
EOJS

    # CSS
    styleclass: acctInfoForm
    stylesheet: /style/acct.css</pre>
<p>Any option that <strong>FormBuilder</strong> accepts is supported by this
configuration file. Basically, any time that you would place
a new bracket to create a nested data structure in <strong>FormBuilder</strong>,
you put a newline and indent instead.</p>
<p><strong>Multiple options MUST be separated by commas</strong>. All whitespace
is preserved intact, so don't be confused and do something
like this:</p>
<pre>
    fields:
        send_me_emails:
            options: Yes No</pre>
<p>Which will result in a single ``Yes No'' option. You want:</p>
<pre>
    fields:
        send_me_emails:
            options: Yes, No</pre>
<p>Or even better:</p>
<pre>
    fields:
        send_me_emails:
            options: 1=Yes, 0=No</pre>
<p>Or perhaps best of all:</p>
<pre>
    fields:
        send_me_emails:
            options: 1=Yes Please, 0=No Thanks</pre>
<p>If you're confused, please join the mailing list:</p>
<pre>
    fbusers-subscribe@formbuilder.org</pre>
<p>We'll be able to help you out.</p>
<p>
</p>

<h1><a name="methods">METHODS</a></h1>
<p>
</p>
<h2><a name="new__"><code>new()</code></a></h2>
<p>This creates a new <code>CGI::FormBuilder::Source::File</code> object.</p>
<pre>
    my $source = CGI::FormBuilder::Source::File-&gt;new;</pre>
<p>Any arguments specified are taken as defaults, which the file
then overrides. For example, to always turn off <code>javascript</code>
(so you don't have to in all your config files), use:</p>
<pre>
    my $source = CGI::FormBuilder::Source::File-&gt;new(
                      javascript =&gt; 0
                 );</pre>
<p>Then, every file parsed by <code>$source</code> will have <code>javascript =&gt; 0</code>
in it, unless that file has a <code>javascript:</code> setting itself.</p>
<p>
</p>
<h2><a name="parse__source_"><code>parse($source)</code></a></h2>
<p>This parses the specified source, which is either a <code>$file</code>,
<code>\$string</code>, or <code>\@array</code>, and returns a hash which can
be passed directly into <code>CGI::FormBuilder</code>:</p>
<pre>
    my %conf = $source-&gt;parse('myform.conf');
    my $form = CGI::FormBuilder-&gt;new(%conf);</pre>
<p>
</p>
<h2><a name="write_module__modname_"><code>write_module($modname)</code></a></h2>
<p>This will actually write a module in the current directory 
which you can then use in subsequent scripts to get the same
form:</p>
<pre>
    $source-&gt;parse('myform.conf');
    $source-&gt;write_module('MyForm');    # write MyForm.pm

    # then in your Perl code
    use MyForm;
    my $form = MyForm-&gt;new;</pre>
<p>You can also override settings from <code>MyForm</code> the same as you
would in <strong>FormBuilder</strong>:</p>
<pre>
    my $form = MyForm-&gt;new(
                    header =&gt; 1,
                    submit =&gt; ['Save Changes', 'Abort']
               );</pre>
<p>This will speed things up, since you don't have to re-parse
the file every time. Nice idea Peter.</p>
<p>
</p>

<h1><a name="notes">NOTES</a></h1>
<p>This module was completely inspired by Peter Eichman's 
<code>Text::FormBuilder</code>, though the syntax is different.</p>
<p>Remember that to get a new level in a hashref, you need
to add a newline and indent. So to get something like this:</p>
<pre>
    table =&gt; {cellpadding =&gt; 1, cellspacing =&gt; 4},
    td    =&gt; {align =&gt; 'center', bgcolor =&gt; 'gray'},
    font  =&gt; {face =&gt; 'arial,helvetica', size =&gt; '+1'},</pre>
<p>You need to say:</p>
<pre>
    table:
        cellpadding: 1
        cellspacing: 4

    td:
        align: center
        bgcolor: gray

    font:
        face: arial,helvetica
        size: +1</pre>
<p>You get the idea...</p>
<p>
</p>

<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="/download/CGI-FormBuilder-3.0301/docs/CGI/FormBuilder.html">the CGI::FormBuilder manpage</a>, <a href="/download/CGI-FormBuilder-3.0301/docs/Text/FormBuilder.html">the Text::FormBuilder manpage</a></p>
<p>
</p>

<h1><a name="revision">REVISION</a></h1>
<p>$Id: File.pm,v 1.23 2006/02/24 01:42:29 nwiger Exp $</p>
<p>
</p>

<h1><a name="author">AUTHOR</a></h1>
<p>Copyright (c) 2005-2006 Nathan Wiger &lt;<a href="mailto:nate@wiger.org">nate@wiger.org</a>&gt;. All Rights Reserved.</p>
<p>This module is free software; you may copy this under the terms of
the GNU General Public License, or the Artistic License, copies of
which should have accompanied your Perl kit.</p>




</td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="2" class="bar">
<tr><td align="center" class="bar">
FormBuilder is &copy; 2000-2006 <a href="/contrib/author.pl" class="bar">Nate Wiger</a>,
with contributions from <a href="/contrib/" class="bar">many people</a>.
</td></tr></table>
<div align="center">
<a href="http://www.nateware.com/"><img src="/images/nateware_powered.gif"
 border="0" width="92" height="33" alt="Nateware" /></a>
</div>
</body></html>
